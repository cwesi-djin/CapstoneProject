{% extends "api/base.html" %}

{% block content %}
    <div class="container">
        <h1>Our Products{% if current_category %} - {{ current_category }}{% endif %}</h1>

        <div class="categories">
            <a href="{% url 'product-list' %}" {% if not current_category %}class="active"{% endif %}>All</a><br>
            {% for value, label in categories %}
                <a href="{% url 'product-list-by-category' value %}" {% if current_category == value %}class="active"{% endif %}>
                    {{ label }}
                </a><br>
            {% endfor %}
        </div>

        <div class="product-grid">
            {% for product in products %}
                <div class="product-card">
                    {% if product.image %}
                        <img src="{{ product.image.url }}" alt="{{ product.name }}">
                    {% else %}
                        <img src="/static/placeholder.jpg" alt="No image">
                    {% endif %}
                    <h3>{{ product.name }}</h3>
                    <p>${{ product.price }}</p>
                    <a href="{% url 'product-detail' product.id %}">View Details</a>
                    <form method="post" action="{% url 'cart-add' product.id %}">
                        {% csrf_token %}
                        <button type="submit">Add to Cart</button>
                    </form>
                </div>
            {% empty %}
                <p>No products found.</p>
            {% endfor %}
        </div>
    </div>
{% endblock %}